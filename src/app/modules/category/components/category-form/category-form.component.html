<mat-card class="form-container">
    <mat-card-title>{{title}}</mat-card-title>
    <form [formGroup]="categoryForm" (ngSubmit)="onSubmit()" *ngIf="categoryForm">
        <mat-card-content>
            <mat-form-field class="full-width" *ngIf="isEdit">
                <input matInput placeholder="Identifiant" [value]="id" disabled>
            </mat-form-field>
            <mat-form-field class="full-width">
                <input matInput placeholder="Label" formControlName="label" autofocus required>
                <mat-error *ngIf="label.errors?.required">
                    Label is <strong>required</strong>
                </mat-error>
            </mat-form-field>
            <mat-form-field class="full-width">
                <textarea matInput placeholder="Description" formControlName="description" [cdkTextareaAutosize]="true" [cdkAutosizeMaxRows]="5" [cdkAutosizeMinRows]="5"></textarea>
            </mat-form-field>
            <h2 class="mat-h2">Values</h2>
            <button mat-raised-button (click)="addValue()"><mat-icon>add</mat-icon> Add value</button>
            <div formArrayName="values">
                <mat-list role="list">
                    <app-category-value (delete)="onDeleteValue($event)" *ngFor="let value of values.controls; let i = index;" role="listitem" [group]="value" [index]="i">
                    </app-category-value>
                </mat-list>
            </div>
            <mat-error *ngIf="!categoryForm.pristine && values.errors?.required">
                At least one value is required
            </mat-error>
            <mat-error *ngIf="apiError">
                {{apiError}}
            </mat-error>
        </mat-card-content>
        <mat-card-actions>
            <button mat-button type="submit" color="primary" [disabled]="!categoryForm.valid"><mat-icon>done</mat-icon> Submit</button>
            <button mat-button type="button" *ngIf="isEdit" color="warn" (click)="onDelete()"><mat-icon>delete</mat-icon> Delete</button>
            <button mat-button type="reset" (click)="onReset()"><mat-icon>cancel</mat-icon> Cancel</button>
        </mat-card-actions>
    </form>
</mat-card>

